<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PTT ERP - Inventory</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }
    body {
      display: flex; min-height: 100vh;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: #fff;
    }

    /* Sidebar */
    .sidebar {
      width: 240px; background: rgba(255,255,255,0.1);
      backdrop-filter: blur(12px); padding: 20px;
      display: flex; flex-direction: column; gap: 20px;
      box-shadow: 2px 0 15px rgba(0,0,0,0.3);
      border-right: 1px solid rgba(255,255,255,0.2);
    }
    .sidebar h2 {
      font-size: 1.3rem; text-align: center; font-weight: 600;
    }
    .sidebar nav {
      display: flex; flex-direction: column; gap: 12px;
    }
    .sidebar nav a {
      text-decoration: none; padding: 12px 15px;
      border-radius: 12px; font-weight: 500;
      color: #fff; transition: 0.3s;
      display: flex; align-items: center; gap: 10px;
    }
    .sidebar nav a:hover,
    .sidebar nav a.active {
      background: rgba(255,255,255,0.3); color: #000; font-weight: 600;
    }

    /* Main */
    .main { flex: 1; padding: 30px; display: flex; flex-direction: column; gap: 20px; }
    .header { display: flex; justify-content: space-between; align-items: center; }
    .header h1 { font-size: 1.6rem; text-shadow: 2px 2px 5px rgba(0,0,0,0.4); }

    .btn {
      background: #ffd369; color: #000; padding: 10px 18px;
      border-radius: 12px; font-weight: 600; text-decoration: none;
      transition: 0.3s;
    }
    .btn:hover { background: #ffb703; }

    /* Card */
    .card-container {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px; margin-top: 10px;
    }
    .card {
      background: rgba(255,255,255,0.15); backdrop-filter: blur(10px);
      border-radius: 20px; padding: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0,0,0,0.5); }
    .card h3 { font-size: 1.1rem; margin-bottom: 10px; }
    .card .value { font-size: 1.4rem; font-weight: 600; color: #ffd369; }

    /* Table */
    .table-section {
      margin-top: 20px; background: rgba(255,255,255,0.12);
      padding: 20px; border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    .table-section h2 { margin-bottom: 15px; }
    table { width: 100%; border-collapse: collapse; border-radius: 12px; overflow: hidden; }
    table thead { background: rgba(255,255,255,0.2); }
    table th, table td { padding: 12px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.2); }
    table tbody tr:hover { background: rgba(255,255,255,0.1); }

    .delete-btn {
      background: #ff4d4d; color: #fff; border: none;
      padding: 6px 12px; border-radius: 8px; cursor: pointer;
      transition: 0.3s;
    }
    .delete-btn:hover { background: #e60000; }

    /* Status badge */
    .status { padding: 4px 10px; border-radius: 12px; font-weight: 600; font-size: 0.85rem; }
    .ok { background: #28a745; }
    .warn { background: #ffc107; color: #000; }
    .danger { background: #dc3545; }
    .pending { background: #17a2b8; }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar">
    <h2>PTT ERP</h2>
    <nav>
      <a href="index.html"><i class="fa-solid fa-house"></i> Home</a>
      <a href="financials.html"><i class="fa-solid fa-coins"></i> Financials</a>
      <a href="procurement.html" class="active"><i class="fa-solid fa-box"></i> Inventory</a>
      <a href="report.html"><i class="fa-solid fa-chart-line"></i> Report</a>
    </nav>
  </aside>

  <!-- Main content -->
  <div class="main">
    <div class="header">
      <h1>การจัดการสินค้าคงคลัง (Inventory Management)</h1>
      <a href="#" class="btn">+ เพิ่มสินค้า</a>
    </div>

    <!-- Summary -->
    <div class="card-container">
      <div class="card">
        <h3>มูลค่ารวมสินค้าคงคลัง</h3>
        <div class="value" id="totalValue">฿147,500,000</div>
      </div>
      <div class="card">
        <h3>จำนวนรายการสินค้า</h3>
        <div class="value" id="totalItems">4 รายการ</div>
      </div>
    </div>

    <!-- Stock Table -->
    <div class="table-section">
      <h2><i class="fa-solid fa-boxes-stacked"></i> สินค้าคงเหลือ</h2>
      <table>
        <thead>
          <tr>
            <th>สินค้า</th>
            <th>ประเภท</th>
            <th>จำนวนคงเหลือ</th>
            <th>หน่วย</th>
            <th>มูลค่าประมาณ (บาท)</th>
            <th>สถานะ</th>
            <th>จัดการ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>น้ำมันดิบ</td>
            <td>พลังงาน</td>
            <td>50,000</td>
            <td>บาร์เรล</td>
            <td>฿80,000,000</td>
            <td><span class="status ok">เพียงพอ</span></td>
            <td><button class="delete-btn">ลบ</button></td>
          </tr>
          <tr>
            <td>ก๊าซธรรมชาติ</td>
            <td>พลังงาน</td>
            <td>25,000</td>
            <td>ตัน</td>
            <td>฿50,000,000</td>
            <td><span class="status ok">เพียงพอ</span></td>
            <td><button class="delete-btn">ลบ</button></td>
          </tr>
          <tr>
            <td>สารเคมี</td>
            <td>วัตถุดิบ</td>
            <td>12,500</td>
            <td>กิโลกรัม</td>
            <td>฿12,500,000</td>
            <td><span class="status warn">ใกล้หมด</span></td>
            <td><button class="delete-btn">ลบ</button></td>
          </tr>
          <tr>
            <td>อุปกรณ์โรงกลั่น</td>
            <td>อุตสาหกรรม</td>
            <td>150</td>
            <td>ชิ้น</td>
            <td>฿5,000,000</td>
            <td><span class="status danger">ต่ำกว่ากำหนด</span></td>
            <td><button class="delete-btn">ลบ</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Script -->
  <script>
    const btnAdd = document.querySelector('.btn');
    const tbody = document.querySelector('table tbody');
    const totalValueEl = document.getElementById('totalValue');
    const totalItemsEl = document.getElementById('totalItems');

    function updateSummary() {
      let rows = tbody.querySelectorAll('tr');
      let total = 0;
      rows.forEach(row => {
        const valueText = row.cells[4].innerText.replace(/[฿,]/g,'');
        total += parseFloat(valueText) || 0;
      });
      totalValueEl.innerText = "฿" + total.toLocaleString();
      totalItemsEl.innerText = rows.length + " รายการ";
    }

    function attachDeleteEvent(button) {
      button.addEventListener('click', function() {
        if (confirm('ต้องการลบสินค้านี้หรือไม่?')) {
          const row = button.closest('tr');
          row.remove();
          updateSummary();
        }
      });
    }
    document.querySelectorAll('.delete-btn').forEach(attachDeleteEvent);

    btnAdd.addEventListener('click', function(e) {
      e.preventDefault();
      if(document.querySelector('#addForm')) return;

      const form = document.createElement('tr');
      form.id = 'addForm';
      form.innerHTML = `
        <td><input type="text" placeholder="สินค้า" required></td>
        <td><input type="text" placeholder="ประเภท" required></td>
        <td><input type="number" placeholder="จำนวน" required></td>
        <td><input type="text" placeholder="หน่วย" required></td>
        <td><input type="number" placeholder="มูลค่า (บาท)" required></td>
        <td><span class="status pending">รอประเมิน</span></td>
        <td>
          <button id="saveBtn">บันทึก</button>
          <button id="cancelBtn">ยกเลิก</button>
        </td>
      `;
      tbody.prepend(form);

      document.getElementById('saveBtn').addEventListener('click', function(e) {
        e.preventDefault();
        const inputs = form.querySelectorAll('input');
        const [product, type, qty, unit, value] = Array.from(inputs).map(i => i.value.trim());
        if (!product || !type || !qty || !unit || !value) {
          alert('กรุณากรอกข้อมูลให้ครบถ้วน');
          return;
        }
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
          <td>${product}</td>
          <td>${type}</td>
          <td>${parseInt(qty).toLocaleString()}</td>
          <td>${unit}</td>
          <td>฿${parseFloat(value).toLocaleString()}</td>
          <td><span class="status pending">รอประเมิน</span></td>
          <td><button class="delete-btn">ลบ</button></td>
        `;
        form.remove();
        tbody.prepend(newRow);
        attachDeleteEvent(newRow.querySelector('.delete-btn'));
        updateSummary();
      });

      document.getElementById('cancelBtn').addEventListener('click', function(e) {
        e.preventDefault();
        form.remove();
      });
    });
  </script>

</body>
</html>
